<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Animal Habitat Lab (Base)</title>

    <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>

    <style>
      body { margin: 0; }
    </style>

    <!-- Load modules -->
    <script type="module" src="./src/main.js"></script>
  </head>

  <body>
    <a-scene background="color: #87CEEB">
      <a-assets>
        <!-- Audio -->
        <audio id="pickupSound" src="./assets/audio/pickup.wav"></audio>
        <audio id="successSound" src="./assets/audio/success.wav"></audio>
        <audio id="wrongSound" src="./assets/audio/wrong.wav"></audio>

        <!-- Models (download these yourself and put in assets/models/) -->
        <a-asset-item id="pigModel" src="./assets/models/pig.glb"></a-asset-item>
        <a-asset-item id="foxModel" src="./assets/models/fox.glb"></a-asset-item>
        <a-asset-item id="fishModel" src="./assets/models/fish.glb"></a-asset-item>
      </a-assets>

      <!-- Player + cursor -->
      <a-entity id="rig" position="0 0 6">
        <a-entity id="player" camera look-controls wasd-controls position="0 1.6 0" game-timer></a-entity>
        <a-entity cursor="rayOrigin: mouse" raycaster="objects: .clickable"></a-entity>
      </a-entity>

      <!-- HUD -->
      <a-text id="hud"
              value="Time: 0.0  Score: 0  Selected: None"
              position="-0.9 0.6 -1.2"
              width="2.2"
              color="white"
              hud-follow>
      </a-text>

      <!-- Floor -->
      <a-plane rotation="-90 0 0" width="30" height="30" color="#dfe8d8"></a-plane>

      <!-- Instruction sign -->
      <a-text value="Pick an animal, drag to rotate it on the pedestal,\nthen click a habitat zone to place it."
              position="0 2.6 -1"
              align="center"
              width="6"
              color="#112">
      </a-text>

      <!-- Inspection pedestal -->
      <a-cylinder position="0 1 -2" radius="0.7" height="0.4" color="#666"></a-cylinder>
      <a-entity id="inspectSlot" position="0 1.35 -2"></a-entity>

      <!-- Animal selection row -->
      <a-entity position="0 1 -5">
        <a-entity class="clickable"
                  gltf-model="#pigModel"
                  position="-2 0 0"
                  scale="0.8 0.8 0.8"
                  select-animal="id: pig; label: Pig; habitat: farm"
                  sound="src: #pickupSound; on: animal-picked">
        </a-entity>

        <a-entity class="clickable"
                  gltf-model="#foxModel"
                  position="0 0 0"
                  scale="0.8 0.8 0.8"
                  select-animal="id: fox; label: Fox; habitat: forest"
                  sound="src: #pickupSound; on: animal-picked">
        </a-entity>

        <a-entity class="clickable"
                  gltf-model="#fishModel"
                  position="2 0 0"
                  scale="0.8 0.8 0.8"
                  select-animal="id: fish; label: Fish; habitat: ocean"
                  sound="src: #pickupSound; on: animal-picked">
        </a-entity>
      </a-entity>

      <!-- Habitat zones -->
      <a-box class="clickable"
             position="-6 0.5 -10"
             width="4" height="1" depth="4"
             color="#b28a2e"
             habitat-zone="habitat: farm; label: FARM"
             sound="src: #successSound; on: correct-place"
             sound__wrong="src: #wrongSound; on: wrong-place">
      </a-box>

      <a-box class="clickable"
             position="0 0.5 -10"
             width="4" height="1" depth="4"
             color="#2e8b57"
             habitat-zone="habitat: forest; label: FOREST"
             sound="src: #successSound; on: correct-place"
             sound__wrong="src: #wrongSound; on: wrong-place">
      </a-box>

      <a-box class="clickable"
             position="6 0.5 -10"
             width="4" height="1" depth="4"
             color="#1e6fd8"
             habitat-zone="habitat: ocean; label: OCEAN"
             sound="src: #successSound; on: correct-place"
             sound__wrong="src: #wrongSound; on: wrong-place">
      </a-box>

      <!-- Win text -->
      <a-text id="winText"
              value="LESSON COMPLETE!"
              position="0 4 -8"
              align="center"
              width="10"
              color="yellow"
              visible="false">
      </a-text>

      <!-- Light -->
      <a-entity light="type: ambient; intensity: 0.6"></a-entity>
      <a-entity light="type: directional; intensity: 0.9" position="1 3 2"></a-entity>
    </a-scene>
  </body>
</html>
